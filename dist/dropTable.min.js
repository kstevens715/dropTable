/*! Drag, Drop & Process data from spreadsheet - v0.1.0 - 2013-04-06
* https://github.com/kstevens715/dropTable
* Copyright (c) 2013 Kyle Stevens; Licensed MIT */
(function(r){var t,e,n=!1,o=[],a={init:function(t){e=r.extend({fnProcessRow:null,fnDropComplete:null,delayProcessing:!1,fieldDelimiter:"	",dataFormat:"Text"},t),this.on("dragover",a.dragOver),this.on("drop",a.drop),this.on("dragenter",a.dragEnter),this.on("dragleave",a.dragLeave)},process:function(){for(var r,t=0;o.length>t;t++)r=o[t],"function"==typeof e.fnProcessRow&&e.fnProcessRow(r)},drop:function(t){var n=t.originalEvent.dataTransfer.getData(e.dataFormat);return o=r.csv.toArrays(n,{separator:e.fieldDelimiter}),a.drawHtml(),"function"==typeof e.fnDropComplete&&e.fnDropComplete(),!0},dragOver:function(){return n},dragEnter:function(){return!1},dragLeave:function(){return!1},drawHtml:function(){for(var r,n="<table>",a=0;o.length>a;a++){r=o[a],e.delayProcessing||"function"!=typeof e.fnProcessRow||e.fnProcessRow(r),n+="<tr>";for(var i=0;r.length>i;i++)n=n+"<td>"+r[i]+"</td>";n+="</tr>"}n+="</table>",t.html(n)}};r.fn.dropTable=function(r){return t=this,a[r]?a[r].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof r&&r||a.init.apply(this,arguments),this}})(jQuery);