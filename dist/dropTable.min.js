/*! Drag, Drop & Process data from spreadsheet - v0.1.0 - 2013-04-07
* https://github.com/kstevens715/dropTable
* Copyright (c) 2013 Kyle Stevens; Licensed MIT */
(function(r){var t,e,n=!1,o=[],a={init:function(t){e=r.extend({fnProcessRow:null,fnDropComplete:null,delayProcessing:!1,fieldDelimiter:"	",dataFormat:"Text"},t),this.on("dragover",a.dragOver),this.on("drop",a.drop),this.on("dragenter",a.dragEnter),this.on("dragleave",a.dragLeave)},drop:function(r){var t=r.originalEvent.dataTransfer.getData(e.dataFormat);return o=a.parseData(t),e.delayProcessing||i.process(),a.drawHtml(),"function"==typeof e.fnDropComplete&&e.fnDropComplete(),!0},dragOver:function(){return n},dragEnter:function(){return!1},dragLeave:function(){return!1},parseData:function(t){return r.csv.toArrays(t,{separator:e.fieldDelimiter})},drawHtml:function(){var r,e,n,a="<table>";for(e=0;o.length>e;e++){for(r=o[e],a+="<tr>",n=0;r.length>n;n++)a=a+"<td>"+r[n]+"</td>";a+="</tr>"}a+="</table>",t.html(a)}},i={process:function(){var r,t;if("function"==typeof e.fnProcessRow)for(t=0;o.length>t;t++)r=o[t],e.fnProcessRow(r,t+1)}};r.fn.dropTable=function(r){return t=this,i[r]?i[r].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof r&&r||a.init.apply(this,arguments),this}})(jQuery);